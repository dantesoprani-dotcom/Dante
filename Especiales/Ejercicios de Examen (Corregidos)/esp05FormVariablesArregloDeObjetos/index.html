<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulario - Datos Logísticos</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
            font-size: 16px;
        }
        header, footer {
            background-color: rgb(0, 4, 255);
            color: white;
            text-align: center;
            padding: 10px;
            position: fixed;
            width: 100%;
            z-index: 10;
        }
        header { top: 0; height: 12%; }
        footer { bottom: 0; height: 10%; }

        h1 { font-size: 1.5em; }
        h2 { font-size: 1.1em; }

        main {
            overflow-y: auto;
            height: 78%;
            width: 100%;
            background-color: silver;
            padding: 10px;
            position: fixed;
            top: 12%;
        }
        form { width: 100%; overflow: hidden; }

        label {
            display: block;
            margin-left: 15px;
            margin-bottom: 8px;
        }
        input, select {
            display: block;
            width: 320px;
            height: 50px;
            margin-left: 15px;
            margin-bottom: 18px;
            padding: 0.4em 0.5em;
            font-size: 1rem;
        }
        .form-box {
            width: 45%;
            float: left;
            padding: 10px;
            margin: 0.5%;
        }

        .botones {
            clear: both;
            width: 100%;
            text-align: center;
            padding: 10px;
            margin-top: 20px;
        }
        button {
            padding: 10px 20px;
            margin: 10px;
            font-size: 1rem;
            width: 33%;
            border-radius: 8px;
            border: none;
            background-color: rgb(0, 4, 255);
            color: white;
            cursor: pointer;
        }
        button:hover {
            background-color: rgb(0, 4, 255);
        }
        #fotoContainer {
            margin-top: 20px;
            text-align: center;
        }
        #fotoContainer img {
            max-width: 400px;
            border-radius: 10px;
            margin-bottom: 8px;
        }
        #fotoNombre {
            font-weight: bold;
            font-size: 1.1em;
        }

        @media (max-width: 795px) {
            .form-box { width: 98%; }
            button { width: 90%; margin-top: 10px; }
        }
    </style>
</head>
<body>
    <header>
        <h1>Formulario para Alta</h1>
        <h2>Datos logísticos del cliente</h2>
    </header>

    <main>
        <form id="formClientes">
            <div class="form-box">
                <label for="Codcliente">Código de cliente:</label>
                <select id="Codcliente" required></select>

                <label for="DireccionEntrega">Dirección de entrega:</label>
                <input type="text" id="DireccionEntrega" readonly>

                <label for="ProvinciaEntrega">Provincia de entrega:</label>
                <input type="text" id="ProvinciaEntrega" readonly>
            </div>

            <div class="form-box">
                <label for="FechaEntrega">Fecha de entrega:</label>
                <input type="date" id="FechaEntrega" readonly>

                <label for="HorarioEntrega">Horario de entrega:</label>
                <input type="time" id="HorarioEntrega" readonly>

                <label for="CostoEstimadoTransporte">Costo estimado transporte:</label>
                <input type="number" id="CostoEstimadoTransporte" readonly>
            </div>

            <div class="botones">
                <button type="button" id="mostrarFoto">Mostrar foto del punto de entrega</button>
                <button type="submit">Enviar</button>
                <div id="fotoContainer"></div>
            </div>
        </form>
    </main>

    <footer>
        <h2>Hecho por Dante Soprani.</h2>
    </footer>

    <script>
        // JSON de datos logísticos
        var textoJSONClientes = '{"clientes":[' +
            '{"Codcliente":"001","DireccionEntrega":"Plaza San Martín","ProvinciaEntrega":{"codProv":"CBA","Descripcion":"Córdoba"},"FechaEntrega":"2025-10-20","HorarioEntrega":"10:00","CostoEstimadoTransporte":3500,"FotoPuntoEntrega":"Cordoba.jpeg"},' +
            '{"Codcliente":"002","DireccionEntrega":"3 de Febrero 2649","ProvinciaEntrega":{"codProv":"SF","Descripcion":"Santa Fe"},"FechaEntrega":"2025-09-22","HorarioEntrega":"14:30","CostoEstimadoTransporte":7300,"FotoPuntoEntrega":"SantaFe.jpeg"}' +
             
        ']}';

        var objClientes = JSON.parse(textoJSONClientes);

        // Referencias
        const selCod = document.getElementById("Codcliente");
        const direccion = document.getElementById("DireccionEntrega");
        const provincia = document.getElementById("ProvinciaEntrega");
        const fecha = document.getElementById("FechaEntrega");
        const horario = document.getElementById("HorarioEntrega");
        const costo = document.getElementById("CostoEstimadoTransporte");
        const fotoContainer = document.getElementById("fotoContainer");

        // Cargar clientes al select
        objClientes.clientes.forEach(cli => {
            const opt = document.createElement("option");
            opt.value = cli.Codcliente;
            opt.textContent = `Cliente ${cli.Codcliente}`;
            selCod.appendChild(opt);
        });

        // Mostrar datos del cliente seleccionado
        function mostrarDatos(cod) {
            const c = objClientes.clientes.find(x => x.Codcliente === cod);
            if (c) {
                direccion.value = c.DireccionEntrega;
                provincia.value = c.ProvinciaEntrega.Descripcion;
                fecha.value = c.FechaEntrega;
                horario.value = c.HorarioEntrega;
                costo.value = c.CostoEstimadoTransporte;
                fotoContainer.innerHTML = "";
            }
        }

        window.addEventListener("DOMContentLoaded", () => {
            if (objClientes.clientes.length > 0) {
                selCod.value = objClientes.clientes[0].Codcliente;
                mostrarDatos(selCod.value);
            }
        });

        // Cambiar cliente
        selCod.addEventListener("change", () => mostrarDatos(selCod.value));

        
document.getElementById("mostrarFoto").addEventListener("click", () => {
    const c = objClientes.clientes.find(x => x.Codcliente === selCod.value);
    if (c) {
        fotoContainer.innerHTML = `<img src="${c.FotoPuntoEntrega}" alt="Foto del punto de entrega" style="max-width:400px; border-radius:10px;">`;
    } else {
        fotoContainer.innerHTML = "<p>Seleccione un cliente primero.</p>";
    }
});

        //  Para enviar formulario
        document.getElementById("formClientes").addEventListener("submit", (e) => {
            e.preventDefault();
            alert("Formulario enviado correctamente. ");
        });
    </script>
</body>
</html>